<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<script src="../../js/jQuery.js"></script>
	<script>
	// 1. 不传参数
	// console.log($.when(function( x ) { 							// 因为没有参数，相当于调用callbacks.fire, then调用callbacks.add
	// 		console.log( "I fired immediately" );
	// })); 									
	// 返回一个异步队列只读副本

	// 2.传一个参数，非异步队列对象
	// $.when({x: 'x'}).done(function (x) { 						// $.when调用callbacks.fire, done调用callbacks.add
	// 	console.log(x);
	// });
	// Object {x: "x"}

	// 3.传入一个参数, 异步队列对象

	var defer = jQuery.Deferred();	
	defer.resolve('xxx');

	var defer2 = jQuery.Deferred();
	defer2.resolve('yyy');
	
	$.when(defer, defer2).done(function (x, y) { 								// 这种情况不触发
		console.log(x, y);
	});
	
	var ajaxDefer = $.ajax('http://192.168.50.224/qianduan/FrameWork/jQuery/book/jQuery%E5%86%85%E5%B9%95%E6%8F%AD%E7%A7%98/%E7%AC%AC4%E7%AB%A0%20%E6%B0%91%E6%AD%A5%E9%98%9F%E5%88%97%20Deferred%20Object/data/data1.js', {dataType: "json"});

	var ajaxDefer2 = $.ajax('http://192.168.50.224/qianduan/FrameWork/jQuery/book/jQuery%E5%86%85%E5%B9%95%E6%8F%AD%E7%A7%98/%E7%AC%AC4%E7%AB%A0%20%E6%B0%91%E6%AD%A5%E9%98%9F%E5%88%97%20Deferred%20Object/data/data1.js', {dataType: "json"});

	$.when(ajaxDefer, ajaxDefer2).done(function (a1, a2) {
		console.log(a1, a2);
	});
	
	// 4.传入两个参数, 非异步队列对象
	// $.when({x: 'x'}, {y: 'y'}).done(function (x, y) {			// $.when调用callbacks.fire, donc调用callbacks.add
	// 	console.log(x, y);
	// });
	// Object {x: "x"} Object {y: "y"}

	// 5.传入两个参数, 异步队列对象
	// var defer1 = new jQuery.Deferred(),
	// 	defer2 = new jQuery.Deferred();
	// $.when(defer1, defer2).done(function (x, y) {				// $.when调用callbacks.add, done调用callbacks.add
	// 	console.log('done' + x);
	// 	console.log('done' + y);
	// }).fail(function () {
	// 	console.log('fail' + arguments);
	// });

	// defer1.resolve('Fish');
	// defer2.resolve('Pizza');

	// 6.传入一个异步队列对象，一个非异步队列对象
	// var defer = new jQuery.Deferred(),
	// 	obj = {x: 'x'};
	// $.when(defer, obj).then(function (x, y) { 						// $.when调用callbacks.add, then调用callbacks.add
	// 	console.log(x);
	// 	console.log(y);
	// });

	// defer.resolve('adfbc');						

	// var requestUrl = 'http://192.168.50.224/qianduan/Book/jQuery%E5%86%85%E5%B9%95%E6%8F%AD%E7%A7%98/%E7%AC%AC4%E7%AB%A0%20%E6%B0%91%E6%AD%A5%E9%98%9F%E5%88%97%20Deferred%20Object/data/data1.js';

	// // $.when( $.ajax( requestUrl ) ).then(
	// // 	function( data, textStatus, jqXHR ) {
	// //   		alert( jqXHR.status ); // Alerts 200
	// // 	}
	// // );
	// var defer = new jQuery.Deferred();

	// $.when( {x: 'x'}, {y: 'y'} ).done(function( x, y ) { 			// $.when相当于 defer.fire, done相当于add, 立刻执行
	//   	console.log( x, y); 
	// });

	</script>
</body>
</html>